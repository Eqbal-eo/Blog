<!DOCTYPE html>
<html lang="ar" dir="rtl">

<head>
    <%
    function toArabicNumbers(str) {
      return str.toString().replace(/\d/g, d => '٠١٢٣٤٥٦٧٨٩'[d]);
    }
  
    function formatDate(dateString) {
      const months = ['يناير', 'فبراير', 'مارس', 'أبريل', 'مايو', 'يونيو', 'يوليو', 'أغسطس', 'سبتمبر', 'أكتوبر', 'نوفمبر', 'ديسمبر'];
      const date = new Date(dateString);
      const day = toArabicNumbers(date.getDate());
      const month = months[date.getMonth()];
      const year = toArabicNumbers(date.getFullYear());
      return `${day} ${month} ${year}`;
    }
    %>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>
        <%= post.title %> - مدونة آفاق
    </title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"
        integrity="sha512-..." crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@300;500;700&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.rtl.min.css" rel="stylesheet">
    <link rel="stylesheet" href="/js/css/home.css">
    <link rel="stylesheet" href="/js/css/blogs.css">
    <link rel="stylesheet" href="/js/css/footer.css">
    <style>
    html,
    body {
        height: 100%;
        margin: 0;
        padding: 0;
        font-family: 'Tajawal', sans-serif;
        display: flex;
        flex-direction: column;
        background-color: #f9f7f0;
    }

    .post-info {
        font-size: 0.9rem;
        color: #a8a6a6;
        margin-top: 1rem;
        margin-bottom: 1rem;
        text-align: right;
    }

    .post-info span {
        margin-left: 1px;
    }

    .post-category {
        display: inline-block;
        padding: 2px 8px;
        background-color: #f0f0f0;
        border-radius: 12px;
        color: #666;
    }

    .post-title {
        font-weight: bold;
        font-size: 2rem;
        margin-top: 30px;
        margin-bottom: 15px;
    }

    .post-content {
        font-size: 1rem;
        line-height: 1.8; /* زودت التباعد بين الأسطر لتسهيل القراءة */
        font-weight: 400;
        padding: 1rem 1.5rem; /* مسافة من الأعلى والأسفل ومن اليمين واليسار */
        text-align: right; /* محاذاة النص لليمين */
    }

    .card-body {
        padding: 0; /* نلغي البادينغ الافتراضي للبطاقة لأننا أضفناه داخل post-content */
    }
    @media screen and (max-width: 768px) {
        .post-title {
            font-size: 1.5rem; /* حجم الخط في الشاشات الصغيرة */
        }

        .post-content {
        font-size: 1rem;
        line-height: 1.8; /* زودت التباعد بين الأسطر لتسهيل القراءة */
        font-weight: 400;
        padding: 1rem 1.5rem; /* مسافة من الأعلى والأسفل ومن اليمين واليسار */
        text-align: right; /* محاذاة النص لليمين */
    }
        
    }
</style>

</head>

<body>

    <!-- Navbar -->
    <nav class="navbar navbar-expand-md">
        <div class="container">
            <a class="navbar-brand fw-bold brand-title" href="/">مدونة آفاق</a>
            <button class="navbar-toggler ms-auto" type="button" data-bs-toggle="collapse" data-bs-target="#mainNavbar"
                aria-label="Toggle navigation" id="navbar-toggler">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="mainNavbar">
                <ul class="navbar-nav ms-auto gap-1 mb-1 mb-md-0">
                    <a href="/" class="btn btn-outline-dark btn-small">الرئيسية</a>
                    <a href="/blogs" class="btn btn-outline-dark btn-small">المدونات</a>
                    <a href="/about" class="btn btn-outline-dark btn-small">عن المنصة</a>
                </ul>
                <div class="d-flex align-items-center gap-2">
                    <a href="/login" class="btn btn-outline-dark-log px-3 py-2 text-nowrap">تسجيل الدخول</a>
                    <a href="/register" class="btn btn-primary px-3 py-2 text-nowrap">إنشاء حساب</a>
                </div>
            </div>
        </div>
    </nav>

    <!-- تدوينة فردية -->
    <section class="section">
        <div class="container">
            <div class="row justify-content-center">
                <div class="col-md-9 mb-4">
                    <!-- عنوان التدوينة خارج مربع التدوينة -->
                    <h1 class="post-title">
                        <%= post.title %>
                    </h1>

                    <!-- معلومات التدوينة (اسم الناشر والتاريخ) خارج المربع -->
                    <div class="post-info">
                        <small>
                            بواسطة <%= post.users.displayName %> 
                            <span>-</span> 
                            نُشرت في <%= formatDate(post.created_at) %>
                            <% if (post.category) { %>
                                <span>-</span>
                                <span class="post-category">
                                    <%= {
                                        'politics': 'سياسة',
                                        'history': 'تاريخ',
                                        'economics': 'اقتصاد',
                                        'technology': 'تكنلوجيا',
                                        'literature': 'أدب',
                                        'medicine': 'طب'
                                    }[post.category] || post.category %>
                                </span>
                            <% } %>
                        </small>
                    </div>

                    <!-- مربع التدوينة -->
                    <div class="card shadow-sm">
                        <div class="card-body">
                            <div class="card-text post-content">
                                <%- post.content %>

                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer>
        آفاق بلُوغ | منصة للتدوين الثقافي والفكري © 2025
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>

</html>